{% extends "base.html" %}

{% block title %}Task List{% endblock %}

{% block content %}
<h1 class="mt-5">Task List</h1>
<form method="POST" action="/">
    {{ form.hidden_tag() }}
    <div class="mb-3">
        {{ form.title.label(class="form-label") }}
        {{ form.title(class="form-control") }}
    </div>
    <div class="mb-3">
        {{ form.description.label(class="form-label") }}
        {{ form.description(class="form-control") }}
    </div>
    <button type="submit" class="btn btn-primary">Add Task</button>
</form>

<!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <ul>
      {% for category, message in messages %}
        <li class="{{ category }}">{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<!-- Task List -->
<div>
    <ul class="list-group mt-3">
        {% for task in tasks %}
            <li class="list-group-item">
                <strong>{{ task.title }}</strong>
                <p>{{ task.description }}</p>
                <form action="{{ url_for('delete_task', task_id=task.id) }}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                </form>
            </li>
        {% else %}
            <li class="list-group-item">No tasks yet.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
